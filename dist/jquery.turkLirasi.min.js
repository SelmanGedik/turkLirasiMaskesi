$.fn.turkLirasi=function(options){var settings=$.extend({logPressed:false,allowedDecimal:true,maxDecimalCount:2,suffix:'TL',formatted:true,autoSelect:true,align:'right'},options);var number_format=function(number,decimals,dec_point,thousands_sep){number=(number+'').replace(/[^0-9+\-Ee.]/g,'');var n=!isFinite(+number)?0:+number,prec=!isFinite(+decimals)?0:Math.abs(decimals),sep=(typeof thousands_sep==='undefined')?',':thousands_sep,dec=(typeof dec_point==='undefined')?'.':dec_point,s='',toFixedFix=function(n,prec){var k=Math.pow(10,prec);return''+Math.round(n*k)/k};s=(prec?toFixedFix(n,prec):''+Math.round(n)).split('.');if(s[0].length>3){s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep)}if((s[1]||'').length<prec){s[1]=s[1]||'';s[1]+=new Array(prec-s[1].length+1).join('0')}return s.join(dec)};var checkValue=function(value){if(value==0)return'';return value};var completeValue=function(value){if(value=='')return 0;return value};return this.each(function(){var activeElement=$(this);var options=$.meta?$.extend({},settings,activeElement.data()):settings;activeElement.data('value',0);activeElement.data('decimalPoint',false);activeElement.val('0 '+options.suffix);activeElement.css('text-align',options.align);$(this).click(function(){if(options.autoSelect){$(this).select()}});$(this).keydown(function(e){var suffix='';if(options.suffix!=''&&options.suffix!=false){suffix=' '+options.suffix}var key=e.charCode||e.keyCode||0;if(options.logPressed){console.log('Pressed Key Code: #'+key)}if((e.ctrlKey||e.metaKey)&&key==86){activeElement.val('');setTimeout(function(e){var realValue=activeElement.val();realValue=realValue.replace(/\./g,'').replace(',','.');realValue=parseFloat(realValue);if(isNaN(realValue)){activeElement.data('value',0);activeElement.data('decimalPoint',false);activeElement.val('0 '+options.suffix)}else{realValue=''+realValue;realValue=realValue.replace('.',',');if(options.formatted){sections=realValue.split(',');var visualValue=number_format(sections[0],0,',','.');if(typeof sections[1]!='undefined'){activeElement.data('decimalPoint',true);visualValue+=','+sections[1]}}else{var visualValue=realValue}activeElement.data('value',realValue);activeElement.val(visualValue+suffix)}},0);return true}else if((e.ctrlKey||e.metaKey)&&key==67){return true}else if(key==9){return true}else if(key==8){var realValue=checkValue(activeElement.data('value'));if(realValue.substr(realValue.length-1)==','){activeElement.data('decimalPoint',false)}realValue=realValue.substr(0,realValue.length-1);realValue=completeValue(realValue);if(options.formatted&&realValue!=0){sections=realValue.split(',');var visualValue=number_format(sections[0],0,',','.');if(activeElement.data('decimalPoint')){visualValue+=','+sections[1]}}else{var visualValue=realValue}activeElement.data('value',realValue);activeElement.val(visualValue+suffix)}else if(key==188&&options.allowedDecimal&&activeElement.data('decimalPoint')==false){var realValue=checkValue(activeElement.data('value'));realValue=realValue+',';if(options.formatted){sections=realValue.split(',');var visualValue=number_format(sections[0],0,',','.')+','}else{var visualValue=realValue}activeElement.data('value',realValue);activeElement.val(visualValue+suffix);activeElement.data('decimalPoint',true)}else if(key>=48&&key<=57){var realValue=checkValue(activeElement.data('value'));var sections=realValue.split(',');if(activeElement.data('decimalPoint')){if(sections[1].length==options.maxDecimalCount){return false}}realValue=realValue+String.fromCharCode(e.keyCode);realValue=completeValue(realValue);if(options.formatted){sections=realValue.split(',');var visualValue=number_format(sections[0],0,',','.');if(activeElement.data('decimalPoint')){visualValue+=','+sections[1]}}else{var visualValue=realValue}activeElement.data('value',realValue);activeElement.val(visualValue+suffix)}else{return false}return false})})};