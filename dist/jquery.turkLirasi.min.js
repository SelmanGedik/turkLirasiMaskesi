$.fn.turkLirasi=function(e){var t=$.extend({allowedDecimal:true,maxDecimalCount:2,autoFillDecimal:true,suffix:"TL",formatted:true,autoSelect:true,align:"right",_eventAfterSet:false,_eventFocusOut:false,debug:false},e);var n=function(e,t,n,r){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var i=!isFinite(+e)?0:+e,s=!isFinite(+t)?0:Math.abs(t),o=typeof r==="undefined"?",":r,u=typeof n==="undefined"?".":n,a="",f=function(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n};a=(s?f(i,s):""+Math.round(i)).split(".");if(a[0].length>3){a[0]=a[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)}if((a[1]||"").length<s){a[1]=a[1]||"";a[1]+=(new Array(s-a[1].length+1)).join("0")}return a.join(u)};var r=function(e,t){if(e.data("options").debug){console.log(t)}};var i=function(e){if(e==0)return"";return e};var s=function(e){if(e=="")return 0;return e};var o=function(e){if(e==false){return""}return" "+e};var u=function(e,t){e.data("decimalPoint",t)};var a=function(e){return e.data("decimalPoint")};var f=function(e){if(e.data("options").allowedDecimal&&e.data("options").autoFillDecimal){e.data("value","0");e.data("visualValue","0,00");u(e,true);e.val(e.data("visualValue")+o(e.data("options").suffix))}else{e.data("value",0);e.data("visualValue","0");u(e,false);e.val(e.data("visualValue")+o(e.data("options").suffix))}};var l=function(e,t){if(e.data("options")[t]!=false){return true}return false};var c=function(e,t,i){t=""+t;t=t.replace(".",",");e.data("value",t);sections=t.split(",");if(e.data("options").formatted){var s=n(sections[0],0,",",".")}else{var s=t}if(typeof sections[1]!="undefined"){u(e,true);s+=","+sections[1]}else{u(e,false)}e.data("visualValue",s);e.val(e.data("visualValue")+o(e.data("options").suffix));r(e,e.data());if(typeof i=="undefined"&&l(e,"_eventAfterSet")){e.trigger("change",e.data("options")._eventAfterSet)}};var h=function(e){if(e.data("selectAll")==true){f(e);e.data("selectAll",false);return true}return false};var p=function(e,t){e.data("options",t);var n=e.val();n=n.replace(/\./g,"").replace(",",".");n=parseFloat(n);if(isNaN(n)){f(e)}else{c(e,n,true)}};return this.each(function(){var e=$(this);var n=$.meta?$.extend({},t,e.data()):t;u(e,false);e.css("text-align",n.align);e.data("selectAll",true);p(e,n);$(this).click(function(){if(e.data("options").autoSelect){e.select();e.data("selectAll",true);r(e,"Tüm metin seçildi.")}});$(this).focusout(function(){if(e.data("options").allowedDecimal&&e.data("options").autoFillDecimal){if(e.data("value")!=""&&e.data("value")!="0"){sections=e.data("value").split(",");if(typeof sections[1]=="undefined"){var t=e.data("options").maxDecimalCount}else{var t=e.data("options").maxDecimalCount-sections[1].length}var n="";for(var r=1;r<=t;r++){n+="0"}if(!a(e)){n=","+n}u(e,true);e.data("value",e.data("value")+n);e.data("visualValue",e.data("visualValue")+n);e.val(e.data("visualValue")+o(e.data("options").suffix))}}if(l(e,"_eventFocusOut")){e.trigger("change",e.data("options")._eventFocusOut)}});$(this).on("setAgain",function(e,t){t=""+t;t=t.replace(/\./g,"").replace(",",".");c($(this),t)});$(this).keydown(function(e){var t=$(this);var o="";if(n.suffix!=""&&n.suffix!=false){o=" "+n.suffix}var f=e.charCode||e.keyCode||0;r(t,"Pressed Key Code: #"+f);if((e.ctrlKey||e.metaKey)&&f==86){t.val("");setTimeout(function(e){var n=t.val();n=n.replace(/\./g,"").replace(",",".");n=parseFloat(n);c(t,n)},0);return true}else if((e.ctrlKey||e.metaKey)&&f==67){return true}else if(f==9||f==39||f==40){t.data("selectAll",false);return true}else if(f==8){if(h(t)){return false}var l=i(t.data("value"));if(l.substr(l.length-1)==","){u(t,false)}l=l.substr(0,l.length-1);l=s(l);c(t,l);r(t,t.data())}else if(f==188&&t.data("options").allowedDecimal&&a(t)==false){var l=i(t.data("value"));l=l+",";c(t,l);r(t,t.data())}else if(f>=48&&f<=57){h(t);var l=i(t.data("value"));var p=l.split(",");if(a(t)){if(typeof p[1]!="undefined"&&p[1].length==n.maxDecimalCount){return false}}l=l+String.fromCharCode(e.keyCode);l=s(l);c(t,l);r(t,t.data())}else{return false}return false})})}
